{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{useParams}from'react-router-dom';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserLogin=()=>{const[user,setUser]=useState({});const[Email,setEmail]=useState('');const[Password,setPassword]=useState('');const[Books,setBooks]=useState('');const[Book,setBook]=useState('');const{login}=useParams();const history=useNavigate();useEffect(()=>{axios.get(\"https://react-kr.vercel.app/users/login/\".concat(login)).then(response=>{setUser(response.data);}).catch(error=>{console.log(error);setUser(null);});axios.get(\"https://react-kr.vercel.app/books/\").then(response=>{setBooks(response.data.books);}).catch(error=>{console.log(error);});},[]);const handleUserLogin=()=>{const matchingBooks=Books.map(book=>book.name.includes(Book));const hasMatchingBook=matchingBooks.some(book=>book);const bookID=Books.find(book=>book.name===Book);if(user.email==Email&user.password==Password&hasMatchingBook){const requestBody={books:[bookID._id]};axios.put(\"https://react-kr.vercel.app/users/login/\".concat(login),requestBody);history(\"/user/books/\".concat(login));}else{alert('Пожалуйста, проверьте введенные данные');}};const handleBacktoUser=()=>{history(\"/user/books/\".concat(login));};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"ID_enter\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 Email \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\",value:Email,onChange:e=>setEmail(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\",value:Password,onChange:e=>setPassword(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043A\\u043D\\u0438\\u0433\\u0438\",value:Book,onChange:e=>setBook(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUserLogin,children:\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleBacktoUser,children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"})]})});};export default UserLogin;","map":{"version":3,"names":["React","useEffect","useState","axios","useParams","useNavigate","jsx","_jsx","jsxs","_jsxs","UserLogin","user","setUser","Email","setEmail","Password","setPassword","Books","setBooks","Book","setBook","login","history","get","concat","then","response","data","catch","error","console","log","books","handleUserLogin","matchingBooks","map","book","name","includes","hasMatchingBook","some","bookID","find","email","password","requestBody","_id","put","alert","handleBacktoUser","children","className","type","placeholder","value","onChange","e","target","onClick"],"sources":["E:/kursach/react-KR/front/src/UserPages/UserLogin.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useParams } from 'react-router-dom';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst UserLogin = () => {\r\n  const [user, setUser] = useState({});\r\n  const [Email, setEmail] = useState('');\r\n  const [Password, setPassword] = useState('');\r\n  const [Books, setBooks] = useState('');\r\n  const [Book, setBook] = useState('');\r\n  const { login } = useParams();\r\n  const history = useNavigate();\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(`https://react-kr.vercel.app/users/login/${login}`)\r\n      .then((response) => {\r\n        setUser(response.data);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        setUser(null);\r\n      });\r\n      axios\r\n      .get(`https://react-kr.vercel.app/books/`)\r\n      .then((response) => {\r\n        setBooks(response.data.books);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  }, []);\r\n\r\n  const handleUserLogin = () => {\r\n    const matchingBooks = Books.map((book) => book.name.includes(Book));\r\n    const hasMatchingBook = matchingBooks.some((book) => book);\r\n    const bookID = Books.find(book => book.name === Book);\r\n    if ((user.email == Email) & (user.password == Password) & (hasMatchingBook)) {\r\n        const requestBody = { books: [bookID._id] };\r\n        axios\r\n          .put(`https://react-kr.vercel.app/users/login/${login}`, requestBody)\r\n        history(`/user/books/${login}`);\r\n    } else {\r\n        alert('Пожалуйста, проверьте введенные данные');\r\n    }\r\n};\r\n\r\nconst handleBacktoUser = () => {\r\n  history(`/user/books/${login}`);\r\n};\r\n\r\n\r\n  return (\r\n    <div><div className=\"ID_enter\">\r\n        <input\r\n            type=\"text\"\r\n            placeholder=\"Введите Email пользователя\"\r\n            value={Email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n        />\r\n        <input\r\n            type=\"text\"\r\n            placeholder=\"Введите пароль пользователя\"\r\n            value={Password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n        />\r\n        <input\r\n            type=\"text\"\r\n            placeholder=\"Введите название книги\"\r\n            value={Book}\r\n            onChange={(e) => setBook(e.target.value)}\r\n        />\r\n        <button onClick={handleUserLogin}>Отправить</button>\r\n        <button onClick={handleBacktoUser}>Назад</button>\r\n    </div>\r\n    </div>\r\n);\r\n};\r\n\r\nexport default UserLogin;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}