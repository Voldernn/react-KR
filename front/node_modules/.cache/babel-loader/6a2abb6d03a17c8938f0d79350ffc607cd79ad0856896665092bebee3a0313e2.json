{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserReg=()=>{const[users,setUsers]=useState([]);const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[login,setLogin]=useState('');const history=useNavigate();useEffect(()=>{axios.get(\"https://react-kr.vercel.app/users\").then(response=>{setUsers(response.data.users);}).catch(error=>{console.log(error);setUsers(null);});},[]);const handleUserReg=()=>{const data={login,email,password};const existingUser=users.find(user=>user.login===login||user.email===email);const hasEmptyValues=Object.values(data).some(value=>!value);console.log(existingUser);if(!existingUser&!hasEmptyValues){axios.post(\"https://react-kr.vercel.app/users/\",data);history(\"/\");}else{alert('Пожалуйста, проверьте введенные данные');}};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"ID_enter\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 login \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\",value:login,onChange:e=>setLogin(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 Email \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\",value:email,onChange:e=>setEmail(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\",value:password,onChange:e=>setPassword(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUserReg,children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"})]})});};export default UserReg;","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","UserReg","users","setUsers","email","setEmail","password","setPassword","login","setLogin","history","get","then","response","data","catch","error","console","log","handleUserReg","existingUser","find","user","hasEmptyValues","Object","values","some","value","post","alert","children","className","type","placeholder","onChange","e","target","onClick"],"sources":["E:/kursach/react-KR/front/src/UserPages/UserReg.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst UserReg = () => {\r\n  const [users, setUsers] = useState([]);\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [login, setLogin] = useState('');\r\n  const history = useNavigate();\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(`https://react-kr.vercel.app/users`)\r\n      .then((response) => {\r\n        setUsers(response.data.users);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        setUsers(null);\r\n      });\r\n  }, []);\r\n\r\n  const handleUserReg = () => {\r\n    const data = {\r\n        login,\r\n        email,\r\n        password,\r\n    }\r\n    const existingUser = users.find((user) => user.login === login || user.email === email);\r\n    const hasEmptyValues = Object.values(data).some(value => !value);\r\n    console.log(existingUser);\r\n    if ((!existingUser) & (!hasEmptyValues)) {\r\n        axios\r\n          .post(`https://react-kr.vercel.app/users/`, data)\r\n        history(`/`);\r\n    } else {\r\n        alert('Пожалуйста, проверьте введенные данные');\r\n    }\r\n};\r\n  return (\r\n    <div><div className=\"ID_enter\">\r\n        <input\r\n            type=\"text\"\r\n            placeholder=\"Введите login пользователя\"\r\n            value={login}\r\n            onChange={(e) => setLogin(e.target.value)}\r\n        />\r\n        <input\r\n            type=\"text\"\r\n            placeholder=\"Введите Email пользователя\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n        />\r\n        <input\r\n            type=\"text\"\r\n            placeholder=\"Введите пароль пользователя\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n        />\r\n        <button onClick={handleUserReg}>Зарегистрироваться</button>\r\n    </div>\r\n    </div>\r\n);\r\n};\r\n\r\nexport default UserReg;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}