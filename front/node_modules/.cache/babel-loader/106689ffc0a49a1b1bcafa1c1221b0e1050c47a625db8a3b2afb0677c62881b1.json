{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{useParams}from'react-router-dom';import BookCard from'../BookPages/BookCard';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserBooks=()=>{const[user,setUser]=useState({});const[books,setBooks]=useState([]);const{login}=useParams();const history=useNavigate();useEffect(()=>{axios.get(\"https://react-kr.vercel.app/users/login/\".concat(login)).then(response=>{setUser(response.data);}).catch(error=>{console.log(error);setUser(null);});axios.get(\"https://react-kr.vercel.app/books/\").then(response=>{setBooks(response.data.books);}).catch(error=>{console.log(error);});},[]);const auth=()=>{history(\"/user/login/\".concat(login));};if(user===null){return/*#__PURE__*/_jsx(\"div\",{children:\"\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D. \\u041F\\u043E\\u0436\\u0430\\u043B\\u0443\\u0439\\u0441\\u0442\\u0430, \\u043F\\u0440\\u043E\\u0432\\u0435\\u0440\\u044C\\u0442\\u0435 \\u0432\\u0432\\u0435\\u0434\\u0435\\u043D\\u043D\\u044B\\u0439 \\u043B\\u043E\\u0433\\u0438\\u043D.\"});}else{const filteredBooks=books.filter(book=>user.books.includes(book._id));//console.log(user.books.includes('6632e7610cbcb43f585e6233'));\nreturn/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"book-list\",children:filteredBooks.map(book=>/*#__PURE__*/_jsx(BookCard,{link:\"/books/details/\".concat(book._id),name:book.name,author:book.author,image:book.image}))}),/*#__PURE__*/_jsx(\"button\",{onClick:auth,children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"})]});}};export default UserBooks;","map":{"version":3,"names":["React","useEffect","useState","axios","useParams","BookCard","useNavigate","jsx","_jsx","jsxs","_jsxs","UserBooks","user","setUser","books","setBooks","login","history","get","concat","then","response","data","catch","error","console","log","auth","children","filteredBooks","filter","book","includes","_id","className","map","link","name","author","image","onClick"],"sources":["E:/kursach/react-KR/front/src/UserPages/UserBooks.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useParams } from 'react-router-dom';\r\nimport BookCard from '../BookPages/BookCard';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst UserBooks = () => {\r\n  const [user, setUser] = useState({});\r\n  const [books, setBooks] = useState([]);\r\n  const { login } = useParams();\r\n  const history = useNavigate();\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(`https://react-kr.vercel.app/users/login/${login}`)\r\n      .then((response) => {\r\n        setUser(response.data);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        setUser(null);\r\n      });\r\n    axios\r\n      .get(`https://react-kr.vercel.app/books/`)\r\n      .then((response) => {\r\n        setBooks(response.data.books);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  }, []);\r\n  const auth = () => {\r\n    history(`/user/login/${login}`);\r\n  };\r\n  if (user === null) {\r\n    return ( <div>Пользователь не найден. Пожалуйста, проверьте введенный логин.</div>);\r\n  } else {\r\n  const filteredBooks = books.filter((book) => user.books.includes(book._id));\r\n  //console.log(user.books.includes('6632e7610cbcb43f585e6233'));\r\n  return ( <div><div className=\"book-list\">\r\n  {filteredBooks.map(\r\n  book => (\r\n  <BookCard link={`/books/details/${book._id}`} name={book.name}\r\n  author={book.author} image={book.image} /> ))}\r\n  </div>\r\n  <button onClick={auth}>Добавить</button>\r\n  </div>);\r\n  }\r\n};\r\n\r\nexport default UserBooks;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,SAAS,KAAQ,kBAAkB,CAC5C,MAAO,CAAAC,QAAQ,KAAM,uBAAuB,CAC5C,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/C,KAAM,CAAAC,SAAS,CAAGA,CAAA,GAAM,CACtB,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGX,QAAQ,CAAC,CAAC,CAAC,CAAC,CACpC,KAAM,CAACY,KAAK,CAAEC,QAAQ,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAEc,KAAM,CAAC,CAAGZ,SAAS,CAAC,CAAC,CAC7B,KAAM,CAAAa,OAAO,CAAGX,WAAW,CAAC,CAAC,CAE7BL,SAAS,CAAC,IAAM,CACdE,KAAK,CACFe,GAAG,4CAAAC,MAAA,CAA4CH,KAAK,CAAE,CAAC,CACvDI,IAAI,CAAEC,QAAQ,EAAK,CAClBR,OAAO,CAACQ,QAAQ,CAACC,IAAI,CAAC,CACxB,CAAC,CAAC,CACDC,KAAK,CAAEC,KAAK,EAAK,CAChBC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC,CAClBX,OAAO,CAAC,IAAI,CAAC,CACf,CAAC,CAAC,CACJV,KAAK,CACFe,GAAG,qCAAqC,CAAC,CACzCE,IAAI,CAAEC,QAAQ,EAAK,CAClBN,QAAQ,CAACM,QAAQ,CAACC,IAAI,CAACR,KAAK,CAAC,CAC/B,CAAC,CAAC,CACDS,KAAK,CAAEC,KAAK,EAAK,CAChBC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC,CACpB,CAAC,CAAC,CACN,CAAC,CAAE,EAAE,CAAC,CACN,KAAM,CAAAG,IAAI,CAAGA,CAAA,GAAM,CACjBV,OAAO,gBAAAE,MAAA,CAAgBH,KAAK,CAAE,CAAC,CACjC,CAAC,CACD,GAAIJ,IAAI,GAAK,IAAI,CAAE,CACjB,mBAASJ,IAAA,QAAAoB,QAAA,CAAK,yUAA8D,CAAK,CAAC,CACpF,CAAC,IAAM,CACP,KAAM,CAAAC,aAAa,CAAGf,KAAK,CAACgB,MAAM,CAAEC,IAAI,EAAKnB,IAAI,CAACE,KAAK,CAACkB,QAAQ,CAACD,IAAI,CAACE,GAAG,CAAC,CAAC,CAC3E;AACA,mBAASvB,KAAA,QAAAkB,QAAA,eAAKpB,IAAA,QAAK0B,SAAS,CAAC,WAAW,CAAAN,QAAA,CACvCC,aAAa,CAACM,GAAG,CAClBJ,IAAI,eACJvB,IAAA,CAACH,QAAQ,EAAC+B,IAAI,mBAAAjB,MAAA,CAAoBY,IAAI,CAACE,GAAG,CAAG,CAACI,IAAI,CAAEN,IAAI,CAACM,IAAK,CAC9DC,MAAM,CAAEP,IAAI,CAACO,MAAO,CAACC,KAAK,CAAER,IAAI,CAACQ,KAAM,CAAE,CAAG,CAAC,CACxC,CAAC,cACN/B,IAAA,WAAQgC,OAAO,CAAEb,IAAK,CAAAC,QAAA,CAAC,kDAAQ,CAAQ,CAAC,EACnC,CAAC,CACN,CACF,CAAC,CAED,cAAe,CAAAjB,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}